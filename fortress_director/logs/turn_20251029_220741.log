2025-10-30 01:07:41,163 [DEBUG] root: Logging configured (console=INFO, file=DEBUG, path=C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\logs\turn_20251029_220741.log)
2025-10-30 01:07:41,164 [DEBUG] __main__: Logging configured via CLI (console level=INFO, path=C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\logs\turn_20251029_220741.log)
2025-10-30 01:07:41,164 [INFO] __main__: Detailed logs written to C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\logs\turn_20251029_220741.log
2025-10-30 01:07:41,186 [INFO] fortress_director.codeaware.function_registry: Registering safe function: change_weather
2025-10-30 01:07:41,186 [INFO] fortress_director.codeaware.function_registry: Safe function 'change_weather' registered successfully.
2025-10-30 01:07:41,187 [INFO] fortress_director.codeaware.function_registry: Registering safe function: spawn_item
2025-10-30 01:07:41,187 [INFO] fortress_director.codeaware.function_registry: Safe function 'spawn_item' registered successfully.
2025-10-30 01:07:41,187 [INFO] fortress_director.codeaware.function_registry: Registering safe function: move_npc
2025-10-30 01:07:41,187 [INFO] fortress_director.codeaware.function_registry: Safe function 'move_npc' registered successfully.
2025-10-30 01:07:41,187 [INFO] fortress_director.codeaware.function_registry: Registering safe function: adjust_logic
2025-10-30 01:07:41,188 [INFO] fortress_director.codeaware.function_registry: Safe function 'adjust_logic' registered successfully.
2025-10-30 01:07:41,188 [INFO] fortress_director.codeaware.function_registry: Registering safe function: adjust_emotion
2025-10-30 01:07:41,188 [INFO] fortress_director.codeaware.function_registry: Safe function 'adjust_emotion' registered successfully.
2025-10-30 01:07:41,188 [INFO] fortress_director.codeaware.function_registry: Registering safe function: raise_corruption
2025-10-30 01:07:41,189 [INFO] fortress_director.codeaware.function_registry: Safe function 'raise_corruption' registered successfully.
2025-10-30 01:07:41,189 [INFO] fortress_director.codeaware.function_registry: Registering safe function: advance_turn
2025-10-30 01:07:41,189 [INFO] fortress_director.codeaware.function_registry: Safe function 'advance_turn' registered successfully.
2025-10-30 01:07:41,189 [INFO] fortress_director.codeaware.function_registry: Registering safe function: modify_resources
2025-10-30 01:07:41,189 [INFO] fortress_director.codeaware.function_registry: Safe function 'modify_resources' registered successfully.
2025-10-30 01:07:41,189 [INFO] fortress_director.codeaware.function_registry: Registering safe function: adjust_metric
2025-10-30 01:07:41,190 [INFO] fortress_director.codeaware.function_registry: Safe function 'adjust_metric' registered successfully.
2025-10-30 01:07:41,190 [INFO] fortress_director.codeaware.function_registry: Registering safe function: move_room
2025-10-30 01:07:41,190 [INFO] fortress_director.codeaware.function_registry: Safe function 'move_room' registered successfully.
2025-10-30 01:07:41,190 [INFO] fortress_director.orchestrator.orchestrator: run_turn called (player_choice_id=None)
2025-10-30 01:07:41,190 [DEBUG] fortress_director.orchestrator.orchestrator: Resetting function validator and creating checkpoint: {'phase': 'turn_start'}
2025-10-30 01:07:41,191 [DEBUG] fortress_director.orchestrator.orchestrator: State snapshot loaded from C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\data\world_state.json (turn=7)
2025-10-30 01:07:41,191 [INFO] fortress_director.codeaware.rollback_system: Checkpoint created (turn=7, call=None)
2025-10-30 01:07:41,191 [INFO] fortress_director.orchestrator.orchestrator: Turn execution started.
2025-10-30 01:07:41,191 [DEBUG] fortress_director.orchestrator.orchestrator: State snapshot loaded from C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\data\world_state.json (turn=7)
2025-10-30 01:07:41,191 [DEBUG] fortress_director.orchestrator.orchestrator: Pre-turn state snapshot: {"active_layer": null, "campaign_id": "default_campaign", "character_summary": "Rhea is loyal but impulsive; Boris is cautious and calculating.", "current_room": "courtyard", "current_turn": 7, "day": 2, "flags": ["recent_events", "has_heard_drums", "atmosphere"], "inventory": [], "lore": {}, "memory_layers": [], "memory_long": [], "memory_short": ["Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...", "Turn 5: You ask him about the drums you hear in the distance...
2025-10-30 01:07:41,192 [DEBUG] fortress_director.utils.metrics_manager: MetricManager initialised with metrics: {'order': 55, 'morale': 62, 'resources': 39, 'knowledge': 46, 'corruption': 10, 'glitch': 23, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 01:07:41,192 [DEBUG] fortress_director.orchestrator.orchestrator: Metrics at turn start: {'order': 55, 'morale': 62, 'resources': 39, 'knowledge': 46, 'corruption': 10, 'glitch': 23, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 01:07:41,192 [INFO] fortress_director.utils.glitch_manager: Resolving glitch (turn=8, seed=12345, current_glitch=23)
2025-10-30 01:07:41,192 [DEBUG] fortress_director.utils.glitch_manager: Metrics before glitch resolution: {'order': 55, 'morale': 62, 'resources': 39, 'knowledge': 46, 'corruption': 10, 'glitch': 23, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 01:07:41,192 [DEBUG] fortress_director.utils.metrics_manager: Applying bulk metric change: metric=order, delta=-2, cause=glitch:medium_anomaly
2025-10-30 01:07:41,192 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'order': current=55, delta=-2, limits=(0, 100) (cause=glitch:medium_anomaly)
2025-10-30 01:07:41,192 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'order', 'delta': -2, 'value': 53, 'cause': 'glitch:medium_anomaly'}
2025-10-30 01:07:41,192 [INFO] fortress_director.utils.metrics_manager: Metric 'order' updated from 55 to 53 (cause=glitch:medium_anomaly)
2025-10-30 01:07:41,192 [DEBUG] fortress_director.utils.metrics_manager: Applying bulk metric change: metric=morale, delta=-1, cause=glitch:medium_anomaly
2025-10-30 01:07:41,192 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'morale': current=62, delta=-1, limits=(0, 100) (cause=glitch:medium_anomaly)
2025-10-30 01:07:41,193 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'morale', 'delta': -1, 'value': 61, 'cause': 'glitch:medium_anomaly'}
2025-10-30 01:07:41,193 [INFO] fortress_director.utils.metrics_manager: Metric 'morale' updated from 62 to 61 (cause=glitch:medium_anomaly)
2025-10-30 01:07:41,193 [DEBUG] fortress_director.utils.metrics_manager: Applying bulk metric change: metric=glitch, delta=2, cause=glitch:medium_anomaly
2025-10-30 01:07:41,193 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'glitch': current=23, delta=2, limits=(0, 100) (cause=glitch:medium_anomaly)
2025-10-30 01:07:41,193 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'glitch', 'delta': 2, 'value': 25, 'cause': 'glitch:medium_anomaly'}
2025-10-30 01:07:41,193 [INFO] fortress_director.utils.metrics_manager: Metric 'glitch' updated from 23 to 25 (cause=glitch:medium_anomaly)
2025-10-30 01:07:41,193 [INFO] fortress_director.utils.glitch_manager: Glitch roll complete: roll=42, triggered_loss=False
2025-10-30 01:07:41,194 [DEBUG] fortress_director.utils.glitch_manager: Metrics after glitch resolution: {'order': 53, 'morale': 61, 'resources': 39, 'knowledge': 46, 'corruption': 10, 'glitch': 25, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 01:07:41,194 [DEBUG] fortress_director.utils.glitch_manager: Glitch effects applied: ['Pathfinding errors unsettle the patrol routes.']
2025-10-30 01:07:41,194 [INFO] fortress_director.orchestrator.orchestrator: Glitch resolution outcome: roll=42, triggered_loss=False
2025-10-30 01:07:41,194 [DEBUG] fortress_director.orchestrator.orchestrator: Metrics after glitch resolution: {'order': 53, 'morale': 61, 'resources': 39, 'knowledge': 46, 'corruption': 10, 'glitch': 25, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 01:07:41,194 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'glitch': current=25, delta=-1, limits=(0, 100) (cause=turn_recovery)
2025-10-30 01:07:41,194 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'glitch', 'delta': -1, 'value': 24, 'cause': 'turn_recovery'}
2025-10-30 01:07:41,194 [INFO] fortress_director.utils.metrics_manager: Metric 'glitch' updated from 25 to 24 (cause=turn_recovery)
2025-10-30 01:07:41,194 [DEBUG] fortress_director.orchestrator.orchestrator: Metrics after glitch recovery: {'order': 53, 'morale': 61, 'resources': 39, 'knowledge': 46, 'corruption': 10, 'glitch': 24, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 01:07:41,194 [INFO] fortress_director.orchestrator.orchestrator: Glitch resolution outcome: roll=42, triggered_loss=False
2025-10-30 01:07:41,195 [DEBUG] fortress_director.orchestrator.orchestrator: Metrics after glitch resolution: {'order': 53, 'morale': 61, 'resources': 39, 'knowledge': 46, 'corruption': 10, 'glitch': 24, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 01:07:41,195 [INFO] fortress_director.orchestrator.orchestrator: World context built.
2025-10-30 01:07:41,195 [DEBUG] fortress_director.orchestrator.orchestrator: World context payload: Turn 7 | Day 2 | Time afternoon
Location: courtyard
Player: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield
World constraint: {"atmosphere": "Morning light filters through ancient stone, cool and damp air lingers.", "sensory_details": "The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart' enduring rhythm."}
Recent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks... Recent motifs: communication
Recent major events: none
Relationship summary: Rhea trusts the player deeply
Character summary: Rhea is loyal but impulsive; Boris is cautious and calculating. Metrics: {"order": 53, "morale": 61, "resources": 39, "knowledge": 46, "corruption": 10, "glitch": 24, "risk_applied_total": 0, "major_flag_set": false, "major_events_triggered": 0, "major_event_last_turn": null}
2025-10-30 01:07:41,195 [INFO] fortress_director.orchestrator.orchestrator: Starting turn 7 in room courtyard
2025-10-30 01:07:41,196 [DEBUG] fortress_director.orchestrator.orchestrator: World agent input: {"WORLD_CONTEXT": "Turn 7 | Day 2 | Time afternoon\nLocation: courtyard\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {\"atmosphere\": \"Morning light filters through ancient stone, cool and damp air lingers.\", \"sensory_details\": \"The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart' enduring rhythm.\"}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. T...
2025-10-30 01:07:41,196 [INFO] fortress_director.orchestrator.orchestrator: Calling world_agent.describe...
2025-10-30 01:07:41,196 [INFO] fortress_director.agents.world_agent: WorldAgent.describe called with variables: {'WORLD_CONTEXT': 'Turn 7 | Day 2 | Time afternoon\nLocation: courtyard\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {"atmosphere": "Morning light filters through ancient stone, cool and damp air lingers.", "sensory_details": "The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart\' enduring rhythm."}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\' he asks... Recent motifs: communication\nRecent major events: none\nRelationship summary: Rhea trusts the player deeply\nCharacter summary: Rhea is loyal but impulsive; Boris is cautious and calculating. Metrics: {"order": 53, "morale": 61, "resources": 39, "knowledge": 46, "corruption": 10, "glitch": 24, "risk_applied_total": 0, "major_flag_set": false, "major_events_triggered": 0, "major_event_last_turn": null}', 'room': 'courtyard', 'time': 'afternoon', 'previous_atmosphere': 'Morning light filters through ancient stone, cool and damp air lingers.', 'previous_sensory_details': "The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart' enduring rhythm."}
2025-10-30 01:07:48,964 [DEBUG] fortress_director.agents.world_agent: Model returned: {'atmosphere': 'Afternoon sun warms ancient stone, cool and damp air lingers.', 'sensory_details': 'The scent of wet earth mingles with the soft glow from oil lamp wicks as fingers trace roughhewn walls.'}
2025-10-30 01:07:48,964 [INFO] fortress_director.agents.world_agent: World description: {'atmosphere': 'Afternoon sun warms ancient stone, cool and damp air lingers.', 'sensory_details': 'The scent of wet earth mingles with the soft glow from oil lamp wicks as fingers trace roughhewn walls.'}
2025-10-30 01:07:48,964 [INFO] fortress_director.orchestrator.orchestrator: World agent returned output.
2025-10-30 01:07:48,965 [DEBUG] fortress_director.orchestrator.orchestrator: World agent output: {"atmosphere": "Afternoon sun warms ancient stone, cool and damp air lingers.", "sensory_details": "The scent of wet earth mingles with the soft glow from oil lamp wicks as fingers trace roughhewn walls."}
2025-10-30 01:07:48,965 [DEBUG] fortress_director.orchestrator.orchestrator: Event agent input: {"WORLD_CONTEXT": "Turn 7 | Day 2 | Time afternoon\nLocation: courtyard\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {\"atmosphere\": \"Morning light filters through ancient stone, cool and damp air lingers.\", \"sensory_details\": \"The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart' enduring rhythm.\"}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. T...
2025-10-30 01:07:48,965 [INFO] fortress_director.orchestrator.orchestrator: Calling event_agent.generate...
2025-10-30 01:07:48,965 [INFO] fortress_director.agents.event_agent: EventAgent.generate called with variables: {'WORLD_CONTEXT': 'Turn 7 | Day 2 | Time afternoon\nLocation: courtyard\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {"atmosphere": "Morning light filters through ancient stone, cool and damp air lingers.", "sensory_details": "The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart\' enduring rhythm."}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\' he asks... Recent motifs: communication\nRecent major events: none\nRelationship summary: Rhea trusts the player deeply\nCharacter summary: Rhea is loyal but impulsive; Boris is cautious and calculating. Metrics: {"order": 53, "morale": 61, "resources": 39, "knowledge": 46, "corruption": 10, "glitch": 24, "risk_applied_total": 0, "major_flag_set": false, "major_events_triggered": 0, "major_event_last_turn": null}', 'day': 2, 'time': 'afternoon', 'room': 'courtyard', 'recent_events': "The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks...", 'world_constraint_from_prev_turn': '{"atmosphere": "Morning light filters through ancient stone, cool and damp air lingers.", "sensory_details": "The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart\' enduring rhythm."}', 'recent_motifs': 'communication', 'lore_continuity_weight': 0, 'memory_layers': ['Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 5: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 6: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Memory summary: Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap... | Turn 5: You ask ...', 'Turn 7: Ask him if he knows anything about the drums. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...'], 'judge_verdict': '{"consistent": true, "reason": "The content is consistent with established world, lore, and character logic. The Shieldbearer\'s curiosity about the drums and his observation of the distant horizon align with his role as a defender.", "coherence": 100, "integrity": 100, "tone_alignment": 100, "penalty_applied": "none", "penalty_magnitude": {}, "feedback": {}}', 'judge_feedback': {'consistent': True, 'reason': "The content is consistent with established world, lore, and character logic. The Shieldbearer's curiosity about the drums and his observation of the distant horizon align with his role as a defender.", 'coherence': 100, 'integrity': 100, 'tone_alignment': 100, 'penalty_applied': 'none', 'penalty_magnitude': {}, 'feedback': {}}, 'continuity_weight': 0.0, 'skip_major': True}
2025-10-30 01:07:48,966 [INFO] fortress_director.agents.event_agent: Injecting forced novelty/rare incident for turn 2
2025-10-30 01:08:22,021 [DEBUG] fortress_director.agents.event_agent: Model returned: {'scene': "The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks.", 'options': [{'id': 'ask_about_drums', 'text': 'You ask him if he knows anything about the drums.', 'action_type': 'communication'}, {'id': 'offer_help', 'text': 'Offering to take over his watch, you suggest that he rest.', 'action_type': 'assistance'}, {'id': 'change_subject', 'text': 'You change the subject and ask about the state of the western wall.', 'action_type': 'communication'}], 'major_event': False, 'safe_functions': []}
2025-10-30 01:08:22,021 [INFO] fortress_director.agents.event_agent: Normalized event output: {'scene': "The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks.", 'options': [{'id': 'ask_about_drums', 'text': 'You ask him if he knows anything about the drums.', 'action_type': 'communication'}, {'id': 'offer_help', 'text': 'Offering to take over his watch, you suggest that he rest.', 'action_type': 'assistance'}, {'id': 'change_subject', 'text': 'You change the subject and ask about the state of the western wall.', 'action_type': 'communication'}], 'major_event': False, 'safe_functions': []}
2025-10-30 01:08:22,021 [INFO] fortress_director.orchestrator.orchestrator: Event agent returned output.
2025-10-30 01:08:22,022 [DEBUG] fortress_director.orchestrator.orchestrator: Event agent output: {"major_event": false, "options": [{"action_type": "communication", "id": "ask_about_drums", "text": "You ask him if he knows anything about the drums."}, {"action_type": "assistance", "id": "offer_help", "text": "Offering to take over his watch, you suggest that he rest."}, {"action_type": "communication", "id": "change_subject", "text": "You change the subject and ask about the state of the western wall."}], "safe_functions": [], "scene": "The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and cu...
2025-10-30 01:08:28,804 [INFO] fortress_director.agents.creativity_agent: CreativityAgent LLM event rewrite applied.
2025-10-30 01:08:28,804 [INFO] fortress_director.orchestrator.orchestrator: CreativityAgent enriched event: {'scene': "Sure, here's the rewritten prompt:\n\n> The intricate patterns etched onto the crumbling facade of the ancient temple hinted at a dark secret waiting to be unveiled.", 'options': [{'id': 'ask_about_drums', 'text': 'You ask him if he knows anything about the drums.', 'action_type': 'communication'}, {'id': 'offer_help', 'text': 'Offering to take over his watch, you suggest that he rest.', 'action_type': 'assistance'}, {'id': 'change_subject', 'text': 'You change the subject and ask about the state of the western wall.', 'action_type': 'communication'}], 'major_event': False, 'safe_functions': [], 'motif_injected': None}
2025-10-30 01:08:28,804 [INFO] fortress_director.agents.judge_agent: JudgeAgent.evaluate called with variables
2025-10-30 01:08:35,658 [DEBUG] fortress_director.agents.judge_agent: Model returned: {'consistent': True, 'reason': "The content is consistent with established world, lore, and character logic. The scene described by the player fits within the context of the game's narrative."}
2025-10-30 01:08:35,658 [INFO] fortress_director.agents.judge_agent: Judge verdict: {'consistent': True, 'reason': "The content is consistent with established world, lore, and character logic. The scene described by the player fits within the context of the game's narrative."}
2025-10-30 01:08:35,658 [INFO] fortress_director.orchestrator.orchestrator: Using previous judge verdict (turn 7)
2025-10-30 01:08:35,658 [INFO] fortress_director.orchestrator.orchestrator: Added motif-based option: diplomacy_approach (motif active)
2025-10-30 01:08:35,659 [INFO] fortress_director.orchestrator.orchestrator: Resolving player choice...
2025-10-30 01:08:35,659 [INFO] fortress_director.orchestrator.orchestrator: Player choice resolved: {'id': 'ask_about_drums', 'text': 'You ask him if he knows anything about the drums.', 'action_type': 'communication'}
2025-10-30 01:08:35,659 [DEBUG] fortress_director.orchestrator.orchestrator: Player choice resolved: {"action_type": "communication", "id": "ask_about_drums", "text": "You ask him if he knows anything about the drums."}
2025-10-30 01:08:35,659 [INFO] fortress_director.orchestrator.orchestrator: Applying dynamic metrics for action_type 'communication': {'morale': 1, 'knowledge': 1}
2025-10-30 01:08:35,659 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'morale': current=61, delta=1, limits=(0, 100) (cause=action_communication)
2025-10-30 01:08:35,659 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'morale', 'delta': 1, 'value': 62, 'cause': 'action_communication'}
2025-10-30 01:08:35,660 [INFO] fortress_director.utils.metrics_manager: Metric 'morale' updated from 61 to 62 (cause=action_communication)
2025-10-30 01:08:35,660 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'knowledge': current=46, delta=1, limits=(0, 100) (cause=action_communication)
2025-10-30 01:08:35,660 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'knowledge', 'delta': 1, 'value': 47, 'cause': 'action_communication'}
2025-10-30 01:08:35,660 [INFO] fortress_director.utils.metrics_manager: Metric 'knowledge' updated from 46 to 47 (cause=action_communication)
2025-10-30 01:08:35,660 [DEBUG] fortress_director.orchestrator.orchestrator: Metrics after dynamic changes: {'order': 53, 'morale': 62, 'resources': 39, 'knowledge': 47, 'corruption': 10, 'glitch': 24, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 01:08:35,660 [DEBUG] fortress_director.orchestrator.orchestrator: Character agent input: {"WORLD_CONTEXT": "Turn 7 | Day 2 | Time afternoon\nLocation: courtyard\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {\"atmosphere\": \"Morning light filters through ancient stone, cool and damp air lingers.\", \"sensory_details\": \"The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart' enduring rhythm.\"}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. T...
2025-10-30 01:08:35,660 [INFO] fortress_director.orchestrator.orchestrator: Calling character_agent.react...
2025-10-30 01:08:35,660 [INFO] fortress_director.agents.character_agent: CharacterAgent.react called with variables: {'WORLD_CONTEXT': 'Turn 7 | Day 2 | Time afternoon\nLocation: courtyard\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {"atmosphere": "Morning light filters through ancient stone, cool and damp air lingers.", "sensory_details": "The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart\' enduring rhythm."}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\' he asks... Recent motifs: communication\nRecent major events: none\nRelationship summary: Rhea trusts the player deeply\nCharacter summary: Rhea is loyal but impulsive; Boris is cautious and calculating. Metrics: {"order": 53, "morale": 61, "resources": 39, "knowledge": 46, "corruption": 10, "glitch": 24, "risk_applied_total": 0, "major_flag_set": false, "major_events_triggered": 0, "major_event_last_turn": null}', 'scene_short': "Sure, here's the rewritten prompt:\n\n> The intricate patterns etched onto the crumbling facade of the ancient temple hinted at a dark secret waiting to be unveiled.", 'player_choice': 'You ask him if he knows anything about the drums.', 'atmosphere': 'Afternoon sun warms ancient stone, cool and damp air lingers.', 'sensory_details': 'The scent of wet earth mingles with the soft glow from oil lamp wicks as fingers trace roughhewn walls.', 'char_brief': 'Rhea is loyal but impulsive; Boris is cautious and calculating.', 'relationship_summary_from_state': 'Rhea trusts the player deeply', 'player_inventory_brief': 'oil lamp, patched shield', 'memory_layers': ['Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 5: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 6: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Memory summary: Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap... | Turn 5: You ask ...', 'Turn 7: Ask him if he knows anything about the drums. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...'], 'recent_events': "The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks...", 'last_major_event': False}
2025-10-30 01:08:44,843 [DEBUG] fortress_director.agents.character_agent: Model returned: {'name': 'Rhea', 'intent': 'observe', 'action': 'stand_vigilance', 'speech': 'I stand vigilant, my senses alert to any sign of danger.'}
2025-10-30 01:08:44,843 [INFO] fortress_director.agents.character_agent: Normalized output (dict): [{'name': 'Rhea', 'intent': 'observe', 'action': 'stand_vigilance', 'speech': 'I stand vigilant, my senses alert to any sign of danger.', 'effects': {}, 'safe_functions': []}]
2025-10-30 01:08:44,843 [INFO] fortress_director.orchestrator.orchestrator: Character agent returned output.
2025-10-30 01:08:44,844 [DEBUG] fortress_director.orchestrator.orchestrator: Character agent output: [{"action": "stand_vigilance", "effects": {}, "intent": "observe", "name": "Rhea", "safe_functions": [], "speech": "I stand vigilant, my senses alert to any sign of danger."}]
2025-10-30 01:08:44,844 [INFO] fortress_director.orchestrator.orchestrator: Injecting major event effect...
2025-10-30 01:08:44,844 [INFO] fortress_director.orchestrator.orchestrator: Major event effect injected.
2025-10-30 01:08:44,845 [INFO] fortress_director.orchestrator.orchestrator: Submitting reactions to rules engine...
2025-10-30 01:08:44,845 [DEBUG] fortress_director.orchestrator.orchestrator: Submitting reactions to rules engine: [{"action": "stand_vigilance", "effects": {}, "intent": "observe", "name": "Rhea", "safe_functions": [], "speech": "I stand vigilant, my senses alert to any sign of danger."}]
2025-10-30 01:08:44,845 [INFO] fortress_director.rules.rules_engine: RulesEngine.process called.
2025-10-30 01:08:44,845 [DEBUG] fortress_director.rules.rules_engine: Input state: {'campaign_id': 'default_campaign', 'turn_limit': 30, 'current_turn': 7, 'rng_seed': 12345, 'scores': {'logic_score': 0, 'emotion_score': 0, 'corruption': 0}, 'flags': ['recent_events', 'has_heard_drums', 'atmosphere'], 'memory_layers': [], 'active_layer': None, 'npc_fragments': {}, 'inventory': [], 'lore': {}, 'turn': 7, 'day': 2, 'time': 'afternoon', 'current_room': 'courtyard', 'recent_events': ['The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...', "The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?'...", "The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks..."], 'recent_motifs': ['communication'], 'world_constraint_from_prev_turn': {'atmosphere': 'Morning light filters through ancient stone, cool and damp air lingers.', 'sensory_details': "The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart' enduring rhythm."}, 'player': {'name': 'The Shieldbearer', 'inventory': ['oil lamp', 'patched shield'], 'stats': {'resolve': 3, 'empathy': 2}, 'summary': 'A weary defender holding the western wall.'}, 'character_summary': 'Rhea is loyal but impulsive; Boris is cautious and calculating.', 'relationship_summary': 'Rhea trusts the player deeply', 'metrics': {'order': 53, 'morale': 62, 'resources': 39, 'knowledge': 47, 'corruption': 10, 'glitch': 24, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}, 'npc_trust': {'Rhea': 3}, 'previous_judge_verdict': {'consistent': True, 'reason': "The content is consistent with established world, lore, and character logic. The Shieldbearer's curiosity about the drums and his observation of the distant horizon align with his role as a defender.", 'coherence': 100, 'integrity': 100, 'tone_alignment': 100, 'penalty_applied': 'none', 'penalty_magnitude': {}, 'feedback': {}}, 'player_choice_history': ['dialogue', 'dialog', 'dialog', 'dialog', 'dialogue', 'dialog', 'communication'], 'summary_text': 'The day passes quietly.', 'memory_short': ['Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 5: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 6: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Memory summary: Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap... | Turn 5: You ask ...', 'Turn 7: Ask him if he knows anything about the drums. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...'], 'memory_long': [], 'status_effects': []}
2025-10-30 01:08:44,845 [DEBUG] fortress_director.rules.rules_engine: Character events: [{'name': 'Rhea', 'intent': 'observe', 'action': 'stand_vigilance', 'speech': 'I stand vigilant, my senses alert to any sign of danger.', 'effects': {}, 'safe_functions': []}]
2025-10-30 01:08:44,845 [DEBUG] fortress_director.rules.rules_engine: World context: Turn 7 | Day 2 | Time afternoon
Location: courtyard
Player: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield
World constraint: {"atmosphere": "Morning light filters through ancient stone, cool and damp air lingers.", "sensory_details": "The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart' enduring rhythm."}
Recent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks... Recent motifs: communication
Recent major events: none
Relationship summary: Rhea trusts the player deeply
Character summary: Rhea is loyal but impulsive; Boris is cautious and calculating. Metrics: {"order": 53, "morale": 61, "resources": 39, "knowledge": 46, "corruption": 10, "glitch": 24, "risk_applied_total": 0, "major_flag_set": false, "major_events_triggered": 0, "major_event_last_turn": null}, scene: Sure, here's the rewritten prompt:

> The intricate patterns etched onto the crumbling facade of the ancient temple hinted at a dark secret waiting to be unveiled., player_choice: {'id': 'ask_about_drums', 'text': 'You ask him if he knows anything about the drums.', 'action_type': 'communication'}
2025-10-30 01:08:44,846 [INFO] fortress_director.rules.rules_engine: RulesEngine._validate_tier_one called.
2025-10-30 01:08:44,846 [DEBUG] fortress_director.rules.rules_engine: Validating character event 0: {'name': 'Rhea', 'intent': 'observe', 'action': 'stand_vigilance', 'speech': 'I stand vigilant, my senses alert to any sign of danger.', 'effects': {}, 'safe_functions': []}
2025-10-30 01:08:44,846 [INFO] fortress_director.rules.rules_engine: Tier one validation passed.
2025-10-30 01:08:44,846 [INFO] fortress_director.agents.judge_agent: JudgeAgent.evaluate called with variables
2025-10-30 01:08:52,301 [DEBUG] fortress_director.agents.judge_agent: Model returned: {'consistent': True, 'reason': 'The content is consistent with established world, lore, and character logic. The scene and player choice are appropriate for their role as a defender in the courtyard.'}
2025-10-30 01:08:52,301 [INFO] fortress_director.agents.judge_agent: Judge verdict: {'consistent': True, 'reason': 'The content is consistent with established world, lore, and character logic. The scene and player choice are appropriate for their role as a defender in the courtyard.'}
2025-10-30 01:08:52,301 [DEBUG] fortress_director.rules.rules_engine: Judge verdict for Rhea: {'consistent': True, 'reason': 'The content is consistent with established world, lore, and character logic. The scene and player choice are appropriate for their role as a defender in the courtyard.', 'coherence': 100, 'integrity': 100, 'tone_alignment': 100, 'penalty_applied': 'none', 'penalty_magnitude': {}, 'feedback': {}}
2025-10-30 01:08:52,301 [INFO] fortress_director.rules.rules_engine: Tier two validation passed with penalties: {'glitch_penalty': 0, 'morale_penalty': 0, 'resources_penalty': 0, 'corruption_penalty': 0, 'order_penalty': 0}
2025-10-30 01:08:52,301 [DEBUG] fortress_director.rules.rules_engine: Applying effects for Rhea: {}
2025-10-30 01:08:52,301 [INFO] fortress_director.rules.rules_engine: Relationship summary updated: Rhea trusts the player deeply
2025-10-30 01:08:52,301 [INFO] fortress_director.rules.rules_engine: Judge penalties applied: {'glitch_penalty': 0, 'morale_penalty': 0, 'resources_penalty': 0, 'corruption_penalty': 0, 'order_penalty': 0}
2025-10-30 01:08:52,301 [INFO] fortress_director.rules.rules_engine: State updated by rules engine.
2025-10-30 01:08:52,301 [DEBUG] fortress_director.rules.rules_engine: Output state: {'campaign_id': 'default_campaign', 'turn_limit': 30, 'current_turn': 7, 'rng_seed': 12345, 'scores': {'logic_score': 0, 'emotion_score': 0, 'corruption': 0}, 'flags': ['recent_events', 'has_heard_drums', 'atmosphere'], 'memory_layers': [], 'active_layer': None, 'npc_fragments': {}, 'inventory': [], 'lore': {}, 'turn': 7, 'day': 2, 'time': 'afternoon', 'current_room': 'courtyard', 'recent_events': ['The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...', "The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?'...", "The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks..."], 'recent_motifs': ['communication'], 'world_constraint_from_prev_turn': {'atmosphere': 'Morning light filters through ancient stone, cool and damp air lingers.', 'sensory_details': "The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart' enduring rhythm."}, 'player': {'name': 'The Shieldbearer', 'inventory': ['oil lamp', 'patched shield'], 'stats': {'resolve': 3, 'empathy': 2}, 'summary': 'A weary defender holding the western wall.'}, 'character_summary': 'Rhea is loyal but impulsive; Boris is cautious and calculating.', 'relationship_summary': 'Rhea trusts the player deeply', 'metrics': {'order': 53, 'morale': 62, 'resources': 39, 'knowledge': 47, 'corruption': 10, 'glitch': 24, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}, 'npc_trust': {'Rhea': 3}, 'previous_judge_verdict': {'consistent': True, 'reason': "The content is consistent with established world, lore, and character logic. The Shieldbearer's curiosity about the drums and his observation of the distant horizon align with his role as a defender.", 'coherence': 100, 'integrity': 100, 'tone_alignment': 100, 'penalty_applied': 'none', 'penalty_magnitude': {}, 'feedback': {}}, 'player_choice_history': ['dialogue', 'dialog', 'dialog', 'dialog', 'dialogue', 'dialog', 'communication', 'communication'], 'summary_text': 'The day passes quietly.', 'memory_short': ['Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 5: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 6: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Memory summary: Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap... | Turn 5: You ask ...', 'Turn 7: Ask him if he knows anything about the drums. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...'], 'memory_long': [], 'status_effects': []}
2025-10-30 01:08:52,301 [INFO] fortress_director.orchestrator.orchestrator: Rules engine accepted updates (turn=8)
2025-10-30 01:08:52,301 [INFO] fortress_director.orchestrator.orchestrator: Applying 1 autonomous actions
2025-10-30 01:08:52,301 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'order': current=53, delta=1, limits=(0, 100) (cause=autonomous_Rhea)
2025-10-30 01:08:52,301 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'order', 'delta': 1, 'value': 54, 'cause': 'autonomous_Rhea'}
2025-10-30 01:08:52,301 [INFO] fortress_director.utils.metrics_manager: Metric 'order' updated from 53 to 54 (cause=autonomous_Rhea)
2025-10-30 01:08:52,301 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'morale': current=62, delta=1, limits=(0, 100) (cause=autonomous_Rhea)
2025-10-30 01:08:52,301 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'morale', 'delta': 1, 'value': 63, 'cause': 'autonomous_Rhea'}
2025-10-30 01:08:52,301 [INFO] fortress_director.utils.metrics_manager: Metric 'morale' updated from 62 to 63 (cause=autonomous_Rhea)
2025-10-30 01:08:52,301 [INFO] fortress_director.orchestrator.orchestrator: Updating state and persisting...
2025-10-30 01:08:52,305 [INFO] fortress_director.orchestrator.orchestrator: Advanced time to evening
2025-10-30 01:08:52,305 [DEBUG] fortress_director.rules.rules_engine: Status effects ticked: []
2025-10-30 01:08:52,305 [INFO] fortress_director.rules.rules_engine: Environmental effects applied with seed 12345
2025-10-30 01:08:52,305 [DEBUG] fortress_director.orchestrator.orchestrator: State after update: {"active_layer": null, "campaign_id": "default_campaign", "character_summary": "Rhea is loyal but impulsive; Boris is cautious and calculating.", "current_room": "courtyard", "current_turn": 8, "day": 2, "flags": ["recent_events", "has_heard_drums", "atmosphere"], "inventory": [], "lore": {}, "memory_layers": [], "memory_long": [], "memory_short": ["Turn 5: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...", "Turn 6: You ask him about the drums you hear in the distance. -> The Shie...
2025-10-30 01:08:52,305 [DEBUG] fortress_director.orchestrator.orchestrator: State persisted to C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\data\world_state.json (turn=8)
2025-10-30 01:08:52,307 [INFO] fortress_director.orchestrator.orchestrator: Executing safe function queue...
2025-10-30 01:08:52,317 [INFO] fortress_director.orchestrator.orchestrator: Safe function queue executed.
2025-10-30 01:08:52,317 [DEBUG] fortress_director.orchestrator.orchestrator: State snapshot loaded from C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\data\world_state.json (turn=8)
2025-10-30 01:08:52,319 [DEBUG] fortress_director.orchestrator.orchestrator: State persisted to C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\data\world_state.json (turn=8)
2025-10-30 01:08:52,319 [DEBUG] fortress_director.orchestrator.orchestrator: State snapshot loaded from C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\data\world_state.json (turn=8)
2025-10-30 01:08:52,319 [DEBUG] fortress_director.utils.metrics_manager: MetricManager initialised with metrics: {'order': 54, 'morale': 63, 'resources': 39, 'knowledge': 47, 'corruption': 10, 'glitch': 24, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 01:08:52,319 [DEBUG] fortress_director.orchestrator.orchestrator: Final metrics snapshot: {'order': 54, 'morale': 63, 'resources': 39, 'knowledge': 47, 'corruption': 10, 'glitch': 24, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 01:08:52,319 [INFO] fortress_director.orchestrator.orchestrator: Win/loss status after turn: {'status': 'ongoing', 'reason': 'conditions_not_met', 'description': 'Oyun devam ediyor...'}
2025-10-30 01:08:52,319 [INFO] fortress_director.orchestrator.orchestrator: Turn summary: The day passes quietly.
2025-10-30 01:08:52,319 [INFO] fortress_director.orchestrator.orchestrator: Turn result built.
2025-10-30 01:08:52,319 [DEBUG] fortress_director.orchestrator.orchestrator: Turn result before validation: {"WORLD_CONTEXT": "Turn 7 | Day 2 | Time afternoon\nLocation: courtyard\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {\"atmosphere\": \"Morning light filters through ancient stone, cool and damp air lingers.\", \"sensory_details\": \"The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart' enduring rhythm.\"}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. T...
2025-10-30 01:08:52,321 [INFO] fortress_director.orchestrator.orchestrator: Turn output validated successfully.
2025-10-30 01:08:52,321 [INFO] fortress_director.orchestrator.orchestrator: Turn completed successfully.
