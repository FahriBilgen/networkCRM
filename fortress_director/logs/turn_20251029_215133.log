2025-10-30 00:51:33,297 [DEBUG] root: Logging configured (console=INFO, file=DEBUG, path=C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\logs\turn_20251029_215133.log)
2025-10-30 00:51:33,297 [DEBUG] __main__: Logging configured via CLI (console level=INFO, path=C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\logs\turn_20251029_215133.log)
2025-10-30 00:51:33,297 [INFO] __main__: Detailed logs written to C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\logs\turn_20251029_215133.log
2025-10-30 00:51:33,319 [INFO] fortress_director.codeaware.function_registry: Registering safe function: change_weather
2025-10-30 00:51:33,330 [INFO] fortress_director.codeaware.function_registry: Safe function 'change_weather' registered successfully.
2025-10-30 00:51:33,331 [INFO] fortress_director.codeaware.function_registry: Registering safe function: spawn_item
2025-10-30 00:51:33,331 [INFO] fortress_director.codeaware.function_registry: Safe function 'spawn_item' registered successfully.
2025-10-30 00:51:33,331 [INFO] fortress_director.codeaware.function_registry: Registering safe function: move_npc
2025-10-30 00:51:33,331 [INFO] fortress_director.codeaware.function_registry: Safe function 'move_npc' registered successfully.
2025-10-30 00:51:33,332 [INFO] fortress_director.codeaware.function_registry: Registering safe function: adjust_logic
2025-10-30 00:51:33,332 [INFO] fortress_director.codeaware.function_registry: Safe function 'adjust_logic' registered successfully.
2025-10-30 00:51:33,332 [INFO] fortress_director.codeaware.function_registry: Registering safe function: adjust_emotion
2025-10-30 00:51:33,332 [INFO] fortress_director.codeaware.function_registry: Safe function 'adjust_emotion' registered successfully.
2025-10-30 00:51:33,332 [INFO] fortress_director.codeaware.function_registry: Registering safe function: raise_corruption
2025-10-30 00:51:33,334 [INFO] fortress_director.codeaware.function_registry: Safe function 'raise_corruption' registered successfully.
2025-10-30 00:51:33,334 [INFO] fortress_director.codeaware.function_registry: Registering safe function: advance_turn
2025-10-30 00:51:33,334 [INFO] fortress_director.codeaware.function_registry: Safe function 'advance_turn' registered successfully.
2025-10-30 00:51:33,334 [INFO] fortress_director.codeaware.function_registry: Registering safe function: modify_resources
2025-10-30 00:51:33,334 [INFO] fortress_director.codeaware.function_registry: Safe function 'modify_resources' registered successfully.
2025-10-30 00:51:33,335 [INFO] fortress_director.codeaware.function_registry: Registering safe function: adjust_metric
2025-10-30 00:51:33,335 [INFO] fortress_director.codeaware.function_registry: Safe function 'adjust_metric' registered successfully.
2025-10-30 00:51:33,335 [INFO] fortress_director.codeaware.function_registry: Registering safe function: move_room
2025-10-30 00:51:33,335 [INFO] fortress_director.codeaware.function_registry: Safe function 'move_room' registered successfully.
2025-10-30 00:51:33,336 [INFO] fortress_director.orchestrator.orchestrator: run_turn called (player_choice_id=None)
2025-10-30 00:51:33,336 [DEBUG] fortress_director.orchestrator.orchestrator: Resetting function validator and creating checkpoint: {'phase': 'turn_start'}
2025-10-30 00:51:33,336 [DEBUG] fortress_director.orchestrator.orchestrator: State snapshot loaded from C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\data\world_state.json (turn=6)
2025-10-30 00:51:33,336 [INFO] fortress_director.codeaware.rollback_system: Checkpoint created (turn=6, call=None)
2025-10-30 00:51:33,336 [INFO] fortress_director.orchestrator.orchestrator: Turn execution started.
2025-10-30 00:51:33,337 [DEBUG] fortress_director.orchestrator.orchestrator: State snapshot loaded from C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\data\world_state.json (turn=6)
2025-10-30 00:51:33,337 [DEBUG] fortress_director.orchestrator.orchestrator: Pre-turn state snapshot: {"active_layer": null, "campaign_id": "default_campaign", "character_summary": "Rhea is loyal but impulsive; Boris is cautious and calculating.", "current_room": "entrance", "current_turn": 6, "day": 2, "flags": ["recent_events", "has_heard_drums", "atmosphere"], "inventory": [], "lore": {}, "memory_layers": [], "memory_long": [], "memory_short": ["Memory summary: Turn 1: Approach the Shieldbearer and ask about the drums you hear. -> The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The l... | Turn 2: Ask him about t...", "Turn 4: You ask the Shi...
2025-10-30 00:51:33,337 [DEBUG] fortress_director.utils.metrics_manager: MetricManager initialised with metrics: {'order': 54, 'morale': 61, 'resources': 39, 'knowledge': 45, 'corruption': 10, 'glitch': 23, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 00:51:33,337 [DEBUG] fortress_director.orchestrator.orchestrator: Metrics at turn start: {'order': 54, 'morale': 61, 'resources': 39, 'knowledge': 45, 'corruption': 10, 'glitch': 23, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 00:51:33,337 [INFO] fortress_director.utils.glitch_manager: Resolving glitch (turn=7, seed=12345, current_glitch=23)
2025-10-30 00:51:33,337 [DEBUG] fortress_director.utils.glitch_manager: Metrics before glitch resolution: {'order': 54, 'morale': 61, 'resources': 39, 'knowledge': 45, 'corruption': 10, 'glitch': 23, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 00:51:33,337 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'glitch': current=23, delta=1, limits=(0, 100) (cause=glitch:cosmetic_noise)
2025-10-30 00:51:33,337 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'glitch', 'delta': 1, 'value': 24, 'cause': 'glitch:cosmetic_noise'}
2025-10-30 00:51:33,337 [INFO] fortress_director.utils.metrics_manager: Metric 'glitch' updated from 23 to 24 (cause=glitch:cosmetic_noise)
2025-10-30 00:51:33,338 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'morale': current=61, delta=-1, limits=(0, 100) (cause=glitch:unease)
2025-10-30 00:51:33,338 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'morale', 'delta': -1, 'value': 60, 'cause': 'glitch:unease'}
2025-10-30 00:51:33,338 [INFO] fortress_director.utils.metrics_manager: Metric 'morale' updated from 61 to 60 (cause=glitch:unease)
2025-10-30 00:51:33,338 [INFO] fortress_director.utils.glitch_manager: Glitch roll complete: roll=10, triggered_loss=False
2025-10-30 00:51:33,338 [DEBUG] fortress_director.utils.glitch_manager: Metrics after glitch resolution: {'order': 54, 'morale': 60, 'resources': 39, 'knowledge': 45, 'corruption': 10, 'glitch': 24, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 00:51:33,338 [DEBUG] fortress_director.utils.glitch_manager: Glitch effects applied: ['Minor static ripples along the parapets.']
2025-10-30 00:51:33,338 [INFO] fortress_director.orchestrator.orchestrator: Glitch resolution outcome: roll=10, triggered_loss=False
2025-10-30 00:51:33,339 [DEBUG] fortress_director.orchestrator.orchestrator: Metrics after glitch resolution: {'order': 54, 'morale': 60, 'resources': 39, 'knowledge': 45, 'corruption': 10, 'glitch': 24, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 00:51:33,339 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'glitch': current=24, delta=-1, limits=(0, 100) (cause=turn_recovery)
2025-10-30 00:51:33,339 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'glitch', 'delta': -1, 'value': 23, 'cause': 'turn_recovery'}
2025-10-30 00:51:33,339 [INFO] fortress_director.utils.metrics_manager: Metric 'glitch' updated from 24 to 23 (cause=turn_recovery)
2025-10-30 00:51:33,339 [DEBUG] fortress_director.orchestrator.orchestrator: Metrics after glitch recovery: {'order': 54, 'morale': 60, 'resources': 39, 'knowledge': 45, 'corruption': 10, 'glitch': 23, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 00:51:33,339 [INFO] fortress_director.orchestrator.orchestrator: Glitch resolution outcome: roll=10, triggered_loss=False
2025-10-30 00:51:33,339 [DEBUG] fortress_director.orchestrator.orchestrator: Metrics after glitch resolution: {'order': 54, 'morale': 60, 'resources': 39, 'knowledge': 45, 'corruption': 10, 'glitch': 23, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 00:51:33,340 [INFO] fortress_director.orchestrator.orchestrator: World context built.
2025-10-30 00:51:33,340 [DEBUG] fortress_director.orchestrator.orchestrator: World context payload: Turn 6 | Day 2 | Time morning
Location: entrance
Player: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield
World constraint: {"atmosphere": "Dawn h echos through stone, a cool and damp calm envelops.", "sensory_details": "The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin."}
Recent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks... Recent motifs: communication
Recent major events: none
Relationship summary: Rhea trusts the player deeply
Character summary: Rhea is loyal but impulsive; Boris is cautious and calculating. Metrics: {"order": 54, "morale": 60, "resources": 39, "knowledge": 45, "corruption": 10, "glitch": 23, "risk_applied_total": 0, "major_flag_set": false, "major_events_triggered": 0, "major_event_last_turn": null}
2025-10-30 00:51:33,340 [INFO] fortress_director.orchestrator.orchestrator: Starting turn 6 in room entrance
2025-10-30 00:51:33,340 [DEBUG] fortress_director.orchestrator.orchestrator: World agent input: {"WORLD_CONTEXT": "Turn 6 | Day 2 | Time morning\nLocation: entrance\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {\"atmosphere\": \"Dawn h echos through stone, a cool and damp calm envelops.\", \"sensory_details\": \"The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin.\"}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy ov...
2025-10-30 00:51:33,340 [INFO] fortress_director.orchestrator.orchestrator: Calling world_agent.describe...
2025-10-30 00:51:33,341 [INFO] fortress_director.agents.world_agent: WorldAgent.describe called with variables: {'WORLD_CONTEXT': 'Turn 6 | Day 2 | Time morning\nLocation: entrance\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {"atmosphere": "Dawn h echos through stone, a cool and damp calm envelops.", "sensory_details": "The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin."}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\' he asks... Recent motifs: communication\nRecent major events: none\nRelationship summary: Rhea trusts the player deeply\nCharacter summary: Rhea is loyal but impulsive; Boris is cautious and calculating. Metrics: {"order": 54, "morale": 60, "resources": 39, "knowledge": 45, "corruption": 10, "glitch": 23, "risk_applied_total": 0, "major_flag_set": false, "major_events_triggered": 0, "major_event_last_turn": null}', 'room': 'entrance', 'time': 'morning', 'previous_atmosphere': 'Dawn h echos through stone, a cool and damp calm envelops.', 'previous_sensory_details': 'The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin.'}
2025-10-30 00:51:43,786 [DEBUG] fortress_director.agents.world_agent: Model returned: {'atmosphere': 'Morning light filters through ancient stone, cool and damp air lingers.', 'sensory_details': "The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace rough-hewn walls. Distant drumbeats resonate like a heart' enduring rhythm."}
2025-10-30 00:51:43,786 [INFO] fortress_director.agents.world_agent: World description: {'atmosphere': 'Morning light filters through ancient stone, cool and damp air lingers.', 'sensory_details': "The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart' enduring rhythm."}
2025-10-30 00:51:43,786 [INFO] fortress_director.orchestrator.orchestrator: World agent returned output.
2025-10-30 00:51:43,786 [DEBUG] fortress_director.orchestrator.orchestrator: World agent output: {"atmosphere": "Morning light filters through ancient stone, cool and damp air lingers.", "sensory_details": "The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart' enduring rhythm."}
2025-10-30 00:51:51,512 [INFO] fortress_director.agents.creativity_agent: CreativityAgent LLM rewrite applied.
2025-10-30 00:51:51,513 [INFO] fortress_director.orchestrator.orchestrator: CreativityAgent modified context: {'WORLD_CONTEXT': 'Turn 6 | Day 2 | Time morning\nLocation: entrance\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {"atmosphere": "Dawn h echos through stone, a cool and damp calm envelops.", "sensory_details": "The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin."}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\' he asks... Recent motifs: communication\nRecent major events: none\nRelationship summary: Rhea trusts the player deeply\nCharacter summary: Rhea is loyal but impulsive; Boris is cautious and calculating. Metrics: {"order": 54, "morale": 60, "resources": 39, "knowledge": 45, "corruption": 10, "glitch": 23, "risk_applied_total": 0, "major_flag_set": false, "major_events_triggered": 0, "major_event_last_turn": null}', 'room': 'entrance', 'time': 'morning', 'previous_atmosphere': 'Dawn h echos through stone, a cool and damp calm envelops.', 'previous_sensory_details': 'The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin.', 'creativity_layer': 'Sure, here is the rewritten prompt as requested:\n\nThe shimmering surface of the lake held a hidden secret, something that would unravel the mystery surrounding its origins and the fate of the people who dared enter its depths.', 'motif_injected': None}
2025-10-30 00:51:51,513 [INFO] fortress_director.agents.judge_agent: JudgeAgent.evaluate called with variables
2025-10-30 00:51:58,741 [DEBUG] fortress_director.agents.judge_agent: Model returned: {'consistent': True, 'reason': 'The rewritten prompt does not contradict established lore, tone, or world logic. It introduces a new motif and maintains the consistency of the existing content.'}
2025-10-30 00:51:58,741 [INFO] fortress_director.agents.judge_agent: Judge verdict: {'consistent': True, 'reason': 'The rewritten prompt does not contradict established lore, tone, or world logic. It introduces a new motif and maintains the consistency of the existing content.'}
2025-10-30 00:51:58,741 [DEBUG] fortress_director.orchestrator.orchestrator: Event agent input: {"WORLD_CONTEXT": {"WORLD_CONTEXT": "Turn 6 | Day 2 | Time morning\nLocation: entrance\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {\"atmosphere\": \"Dawn h echos through stone, a cool and damp calm envelops.\", \"sensory_details\": \"The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin.\"}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low cl...
2025-10-30 00:51:58,741 [INFO] fortress_director.orchestrator.orchestrator: Calling event_agent.generate...
2025-10-30 00:51:58,741 [INFO] fortress_director.agents.event_agent: EventAgent.generate called with variables: {'WORLD_CONTEXT': {'WORLD_CONTEXT': 'Turn 6 | Day 2 | Time morning\nLocation: entrance\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {"atmosphere": "Dawn h echos through stone, a cool and damp calm envelops.", "sensory_details": "The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin."}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\' he asks... Recent motifs: communication\nRecent major events: none\nRelationship summary: Rhea trusts the player deeply\nCharacter summary: Rhea is loyal but impulsive; Boris is cautious and calculating. Metrics: {"order": 54, "morale": 60, "resources": 39, "knowledge": 45, "corruption": 10, "glitch": 23, "risk_applied_total": 0, "major_flag_set": false, "major_events_triggered": 0, "major_event_last_turn": null}', 'room': 'entrance', 'time': 'morning', 'previous_atmosphere': 'Dawn h echos through stone, a cool and damp calm envelops.', 'previous_sensory_details': 'The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin.', 'creativity_layer': 'Sure, here is the rewritten prompt as requested:\n\nThe shimmering surface of the lake held a hidden secret, something that would unravel the mystery surrounding its origins and the fate of the people who dared enter its depths.', 'motif_injected': None}, 'day': 2, 'time': 'morning', 'room': 'entrance', 'recent_events': "The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks...", 'world_constraint_from_prev_turn': '{"atmosphere": "Dawn h echos through stone, a cool and damp calm envelops.", "sensory_details": "The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin."}', 'recent_motifs': 'none', 'lore_continuity_weight': 0, 'memory_layers': ['Memory summary: Turn 1: Approach the Shieldbearer and ask about the drums you hear. -> The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The l... | Turn 2: Ask him about t...', 'Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 5: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 6: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Memory summary: Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap... | Turn 5: You ask ...'], 'judge_verdict': '{"consistent": true, "reason": "The content is consistent with established world, lore, and character logic. The Shieldbearer\'s curiosity about the drums echoes in his voice as he asks about their source.", "coherence": 100, "integrity": 100, "tone_alignment": 100, "penalty_applied": "none", "penalty_magnitude": {}, "feedback": {}}', 'judge_feedback': {'consistent': True, 'reason': "The content is consistent with established world, lore, and character logic. The Shieldbearer's curiosity about the drums echoes in his voice as he asks about their source.", 'coherence': 100, 'integrity': 100, 'tone_alignment': 100, 'penalty_applied': 'none', 'penalty_magnitude': {}, 'feedback': {}}, 'continuity_weight': 0.0, 'skip_major': False}
2025-10-30 00:51:58,742 [INFO] fortress_director.agents.event_agent: Injecting forced novelty/rare incident for turn 2
2025-10-30 00:52:31,695 [DEBUG] fortress_director.agents.event_agent: Model returned: {'scene': "The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks, his voice barely audible over the distant drumbeats.", 'options': [{'id': '1', 'text': 'Ask him if he knows anything about the drums.', 'action_type': 'communication'}, {'id': '2', 'text': 'Offer to take over his watch for a while.', 'action_type': 'help'}, {'id': '3', 'text': 'Inquire about the state of the western wall.', 'action_type': 'communication'}], 'major_event': False, 'safe_functions': []}
2025-10-30 00:52:31,695 [INFO] fortress_director.agents.event_agent: Normalized event output: {'scene': "The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks, his voice barely audible over the distant drumbeats.", 'options': [{'id': '1', 'text': 'Ask him if he knows anything about the drums.', 'action_type': 'communication'}, {'id': '2', 'text': 'Offer to take over his watch for a while.', 'action_type': 'help'}, {'id': '3', 'text': 'Inquire about the state of the western wall.', 'action_type': 'communication'}], 'major_event': False, 'safe_functions': []}
2025-10-30 00:52:31,695 [INFO] fortress_director.orchestrator.orchestrator: Event agent returned output.
2025-10-30 00:52:31,695 [DEBUG] fortress_director.orchestrator.orchestrator: Event agent output: {"major_event": false, "options": [{"action_type": "communication", "id": "1", "text": "Ask him if he knows anything about the drums."}, {"action_type": "help", "id": "2", "text": "Offer to take over his watch for a while."}, {"action_type": "communication", "id": "3", "text": "Inquire about the state of the western wall."}], "safe_functions": [], "scene": "The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks, his voice barely audible over the d...
2025-10-30 00:52:31,695 [INFO] fortress_director.agents.judge_agent: JudgeAgent.evaluate called with variables
2025-10-30 00:52:37,941 [DEBUG] fortress_director.agents.judge_agent: Model returned: {'consistent': True, 'reason': "The content is consistent with established world, lore, and character logic. The Shieldbearer's curiosity about the drums and his observation of the distant horizon align with his role as a defender."}
2025-10-30 00:52:37,942 [INFO] fortress_director.agents.judge_agent: Judge verdict: {'consistent': True, 'reason': "The content is consistent with established world, lore, and character logic. The Shieldbearer's curiosity about the drums and his observation of the distant horizon align with his role as a defender."}
2025-10-30 00:52:37,942 [INFO] fortress_director.orchestrator.orchestrator: Added motif-based option: diplomacy_approach (motif active)
2025-10-30 00:52:37,942 [INFO] fortress_director.orchestrator.orchestrator: Resolving player choice...
2025-10-30 00:52:37,942 [INFO] fortress_director.orchestrator.orchestrator: Player choice resolved: {'id': '1', 'text': 'Ask him if he knows anything about the drums.', 'action_type': 'communication'}
2025-10-30 00:52:37,943 [DEBUG] fortress_director.orchestrator.orchestrator: Player choice resolved: {"action_type": "communication", "id": "1", "text": "Ask him if he knows anything about the drums."}
2025-10-30 00:52:37,943 [INFO] fortress_director.orchestrator.orchestrator: Room progressed to: courtyard (turn 6)
2025-10-30 00:52:37,943 [INFO] fortress_director.orchestrator.orchestrator: Applying dynamic metrics for action_type 'communication': {'morale': 1, 'knowledge': 1}
2025-10-30 00:52:37,943 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'morale': current=60, delta=1, limits=(0, 100) (cause=action_communication)
2025-10-30 00:52:37,943 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'morale', 'delta': 1, 'value': 61, 'cause': 'action_communication'}
2025-10-30 00:52:37,943 [INFO] fortress_director.utils.metrics_manager: Metric 'morale' updated from 60 to 61 (cause=action_communication)
2025-10-30 00:52:37,943 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'knowledge': current=45, delta=1, limits=(0, 100) (cause=action_communication)
2025-10-30 00:52:37,944 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'knowledge', 'delta': 1, 'value': 46, 'cause': 'action_communication'}
2025-10-30 00:52:37,944 [INFO] fortress_director.utils.metrics_manager: Metric 'knowledge' updated from 45 to 46 (cause=action_communication)
2025-10-30 00:52:37,944 [DEBUG] fortress_director.orchestrator.orchestrator: Metrics after dynamic changes: {'order': 54, 'morale': 61, 'resources': 39, 'knowledge': 46, 'corruption': 10, 'glitch': 23, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 00:52:37,944 [DEBUG] fortress_director.orchestrator.orchestrator: Character agent input: {"WORLD_CONTEXT": "Turn 6 | Day 2 | Time morning\nLocation: entrance\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {\"atmosphere\": \"Dawn h echos through stone, a cool and damp calm envelops.\", \"sensory_details\": \"The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin.\"}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy ov...
2025-10-30 00:52:37,944 [INFO] fortress_director.orchestrator.orchestrator: Calling character_agent.react...
2025-10-30 00:52:37,944 [INFO] fortress_director.agents.character_agent: CharacterAgent.react called with variables: {'WORLD_CONTEXT': 'Turn 6 | Day 2 | Time morning\nLocation: entrance\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {"atmosphere": "Dawn h echos through stone, a cool and damp calm envelops.", "sensory_details": "The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin."}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. \'What brings you here so early?\' he asks... Recent motifs: communication\nRecent major events: none\nRelationship summary: Rhea trusts the player deeply\nCharacter summary: Rhea is loyal but impulsive; Boris is cautious and calculating. Metrics: {"order": 54, "morale": 60, "resources": 39, "knowledge": 45, "corruption": 10, "glitch": 23, "risk_applied_total": 0, "major_flag_set": false, "major_events_triggered": 0, "major_event_last_turn": null}', 'scene_short': "The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks, his voice barely audible over the distant drumbeats.", 'player_choice': 'Ask him if he knows anything about the drums.', 'atmosphere': 'Morning light filters through ancient stone, cool and damp air lingers.', 'sensory_details': "The scent of wet earth intertwines with the flickering oil from lamp wicks as fingers trace roughhewn walls. Distant drumbeats resonate like a heart' enduring rhythm.", 'char_brief': 'Rhea is loyal but impulsive; Boris is cautious and calculating.', 'relationship_summary_from_state': 'Rhea trusts the player deeply', 'player_inventory_brief': 'oil lamp, patched shield', 'memory_layers': ['Memory summary: Turn 1: Approach the Shieldbearer and ask about the drums you hear. -> The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The l... | Turn 2: Ask him about t...', 'Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 5: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 6: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Memory summary: Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap... | Turn 5: You ask ...'], 'recent_events': "The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks...", 'last_major_event': False}
2025-10-30 00:52:46,741 [DEBUG] fortress_director.agents.character_agent: Model returned: {'name': 'Rhea', 'intent': 'observe', 'action': 'stand and watch', 'speech': 'I stand vigilant, my senses alert to any sign of danger.'}
2025-10-30 00:52:46,741 [INFO] fortress_director.agents.character_agent: Normalized output (dict): [{'name': 'Rhea', 'intent': 'observe', 'action': 'stand and watch', 'speech': 'I stand vigilant, my senses alert to any sign of danger.', 'effects': {}, 'safe_functions': []}]
2025-10-30 00:52:46,741 [INFO] fortress_director.orchestrator.orchestrator: Character agent returned output.
2025-10-30 00:52:46,742 [DEBUG] fortress_director.orchestrator.orchestrator: Character agent output: [{"action": "stand and watch", "effects": {}, "intent": "observe", "name": "Rhea", "safe_functions": [], "speech": "I stand vigilant, my senses alert to any sign of danger."}]
2025-10-30 00:52:46,742 [INFO] fortress_director.orchestrator.orchestrator: Injecting major event effect...
2025-10-30 00:52:46,742 [INFO] fortress_director.orchestrator.orchestrator: Major event effect injected.
2025-10-30 00:52:46,742 [INFO] fortress_director.orchestrator.orchestrator: Submitting reactions to rules engine...
2025-10-30 00:52:46,742 [DEBUG] fortress_director.orchestrator.orchestrator: Submitting reactions to rules engine: [{"action": "stand and watch", "effects": {}, "intent": "observe", "name": "Rhea", "safe_functions": [], "speech": "I stand vigilant, my senses alert to any sign of danger."}]
2025-10-30 00:52:46,742 [INFO] fortress_director.rules.rules_engine: RulesEngine.process called.
2025-10-30 00:52:46,742 [DEBUG] fortress_director.rules.rules_engine: Input state: {'campaign_id': 'default_campaign', 'turn_limit': 30, 'current_turn': 6, 'rng_seed': 12345, 'scores': {'logic_score': 0, 'emotion_score': 0, 'corruption': 0}, 'flags': ['recent_events', 'has_heard_drums', 'atmosphere'], 'memory_layers': [], 'active_layer': None, 'npc_fragments': {}, 'inventory': [], 'lore': {}, 'turn': 6, 'day': 2, 'time': 'morning', 'current_room': 'courtyard', 'recent_events': ['The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...', "The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?'...", "The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks..."], 'recent_motifs': ['communication'], 'world_constraint_from_prev_turn': {'atmosphere': 'Dawn h echos through stone, a cool and damp calm envelops.', 'sensory_details': 'The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin.'}, 'player': {'name': 'The Shieldbearer', 'inventory': ['oil lamp', 'patched shield'], 'stats': {'resolve': 3, 'empathy': 2}, 'summary': 'A weary defender holding the western wall.'}, 'character_summary': 'Rhea is loyal but impulsive; Boris is cautious and calculating.', 'relationship_summary': 'Rhea trusts the player deeply', 'metrics': {'order': 54, 'morale': 61, 'resources': 39, 'knowledge': 46, 'corruption': 10, 'glitch': 23, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}, 'npc_trust': {'Rhea': 3}, 'previous_judge_verdict': {'consistent': True, 'reason': "The content is consistent with established world, lore, and character logic. The Shieldbearer's curiosity about the drums and his observation of the distant horizon align with his role as a defender.", 'coherence': 100, 'integrity': 100, 'tone_alignment': 100, 'penalty_applied': 'none', 'penalty_magnitude': {}, 'feedback': {}}, 'player_choice_history': ['dialogue', 'dialog', 'dialog', 'dialog', 'dialogue', 'dialog'], 'summary_text': 'The day passes quietly.', 'memory_short': ['Memory summary: Turn 1: Approach the Shieldbearer and ask about the drums you hear. -> The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The l... | Turn 2: Ask him about t...', 'Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 5: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 6: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Memory summary: Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap... | Turn 5: You ask ...'], 'memory_long': [], 'status_effects': []}
2025-10-30 00:52:46,743 [DEBUG] fortress_director.rules.rules_engine: Character events: [{'name': 'Rhea', 'intent': 'observe', 'action': 'stand and watch', 'speech': 'I stand vigilant, my senses alert to any sign of danger.', 'effects': {}, 'safe_functions': []}]
2025-10-30 00:52:46,743 [DEBUG] fortress_director.rules.rules_engine: World context: Turn 6 | Day 2 | Time morning
Location: entrance
Player: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield
World constraint: {"atmosphere": "Dawn h echos through stone, a cool and damp calm envelops.", "sensory_details": "The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin."}
Recent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...; The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?'...; The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks... Recent motifs: communication
Recent major events: none
Relationship summary: Rhea trusts the player deeply
Character summary: Rhea is loyal but impulsive; Boris is cautious and calculating. Metrics: {"order": 54, "morale": 60, "resources": 39, "knowledge": 45, "corruption": 10, "glitch": 23, "risk_applied_total": 0, "major_flag_set": false, "major_events_triggered": 0, "major_event_last_turn": null}, scene: The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks, his voice barely audible over the distant drumbeats., player_choice: {'id': '1', 'text': 'Ask him if he knows anything about the drums.', 'action_type': 'communication'}
2025-10-30 00:52:46,743 [INFO] fortress_director.rules.rules_engine: RulesEngine._validate_tier_one called.
2025-10-30 00:52:46,743 [DEBUG] fortress_director.rules.rules_engine: Validating character event 0: {'name': 'Rhea', 'intent': 'observe', 'action': 'stand and watch', 'speech': 'I stand vigilant, my senses alert to any sign of danger.', 'effects': {}, 'safe_functions': []}
2025-10-30 00:52:46,743 [INFO] fortress_director.rules.rules_engine: Tier one validation passed.
2025-10-30 00:52:46,743 [INFO] fortress_director.agents.judge_agent: JudgeAgent.evaluate called with variables
2025-10-30 00:52:53,434 [DEBUG] fortress_director.agents.judge_agent: Model returned: {'consistent': True, 'reason': 'The content is consistent with the established world, lore, and character logic. The scene and player choice are appropriate for the context of the game.'}
2025-10-30 00:52:53,434 [INFO] fortress_director.agents.judge_agent: Judge verdict: {'consistent': True, 'reason': 'The content is consistent with the established world, lore, and character logic. The scene and player choice are appropriate for the context of the game.'}
2025-10-30 00:52:53,434 [DEBUG] fortress_director.rules.rules_engine: Judge verdict for Rhea: {'consistent': True, 'reason': 'The content is consistent with the established world, lore, and character logic. The scene and player choice are appropriate for the context of the game.', 'coherence': 100, 'integrity': 100, 'tone_alignment': 100, 'penalty_applied': 'none', 'penalty_magnitude': {}, 'feedback': {}}
2025-10-30 00:52:53,435 [INFO] fortress_director.rules.rules_engine: Tier two validation passed with penalties: {'glitch_penalty': 0, 'morale_penalty': 0, 'resources_penalty': 0, 'corruption_penalty': 0, 'order_penalty': 0}
2025-10-30 00:52:53,435 [DEBUG] fortress_director.rules.rules_engine: Applying effects for Rhea: {}
2025-10-30 00:52:53,435 [INFO] fortress_director.rules.rules_engine: Relationship summary updated: Rhea trusts the player deeply
2025-10-30 00:52:53,436 [INFO] fortress_director.rules.rules_engine: Judge penalties applied: {'glitch_penalty': 0, 'morale_penalty': 0, 'resources_penalty': 0, 'corruption_penalty': 0, 'order_penalty': 0}
2025-10-30 00:52:53,436 [INFO] fortress_director.rules.rules_engine: State updated by rules engine.
2025-10-30 00:52:53,436 [DEBUG] fortress_director.rules.rules_engine: Output state: {'campaign_id': 'default_campaign', 'turn_limit': 30, 'current_turn': 6, 'rng_seed': 12345, 'scores': {'logic_score': 0, 'emotion_score': 0, 'corruption': 0}, 'flags': ['recent_events', 'has_heard_drums', 'atmosphere'], 'memory_layers': [], 'active_layer': None, 'npc_fragments': {}, 'inventory': [], 'lore': {}, 'turn': 6, 'day': 2, 'time': 'morning', 'current_room': 'courtyard', 'recent_events': ['The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy over the battlements, casting an eerie pallor on the landscape. The drums beyon...', "The Shieldbearer, his gaze still fixed on the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?'...", "The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you approach. His eyes reflect a mix of exhaustion and curiosity. 'What brings you here so early?' he asks..."], 'recent_motifs': ['communication'], 'world_constraint_from_prev_turn': {'atmosphere': 'Dawn h echos through stone, a cool and damp calm envelops.', 'sensory_details': 'The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin.'}, 'player': {'name': 'The Shieldbearer', 'inventory': ['oil lamp', 'patched shield'], 'stats': {'resolve': 3, 'empathy': 2}, 'summary': 'A weary defender holding the western wall.'}, 'character_summary': 'Rhea is loyal but impulsive; Boris is cautious and calculating.', 'relationship_summary': 'Rhea trusts the player deeply', 'metrics': {'order': 54, 'morale': 61, 'resources': 39, 'knowledge': 46, 'corruption': 10, 'glitch': 23, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}, 'npc_trust': {'Rhea': 3}, 'previous_judge_verdict': {'consistent': True, 'reason': "The content is consistent with established world, lore, and character logic. The Shieldbearer's curiosity about the drums and his observation of the distant horizon align with his role as a defender.", 'coherence': 100, 'integrity': 100, 'tone_alignment': 100, 'penalty_applied': 'none', 'penalty_magnitude': {}, 'feedback': {}}, 'player_choice_history': ['dialogue', 'dialog', 'dialog', 'dialog', 'dialogue', 'dialog', 'communication'], 'summary_text': 'The day passes quietly.', 'memory_short': ['Memory summary: Turn 1: Approach the Shieldbearer and ask about the drums you hear. -> The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The l... | Turn 2: Ask him about t...', 'Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 5: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Turn 6: You ask him about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...', 'Memory summary: Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap... | Turn 5: You ask ...'], 'memory_long': [], 'status_effects': []}
2025-10-30 00:52:53,436 [INFO] fortress_director.orchestrator.orchestrator: Rules engine accepted updates (turn=7)
2025-10-30 00:52:53,436 [INFO] fortress_director.orchestrator.orchestrator: Applying 1 autonomous actions
2025-10-30 00:52:53,437 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'order': current=54, delta=1, limits=(0, 100) (cause=autonomous_Rhea)
2025-10-30 00:52:53,437 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'order', 'delta': 1, 'value': 55, 'cause': 'autonomous_Rhea'}
2025-10-30 00:52:53,437 [INFO] fortress_director.utils.metrics_manager: Metric 'order' updated from 54 to 55 (cause=autonomous_Rhea)
2025-10-30 00:52:53,437 [DEBUG] fortress_director.utils.metrics_manager: Adjusting metric 'morale': current=61, delta=1, limits=(0, 100) (cause=autonomous_Rhea)
2025-10-30 00:52:53,437 [DEBUG] fortress_director.utils.metrics_manager: Metric change logged: {'metric': 'morale', 'delta': 1, 'value': 62, 'cause': 'autonomous_Rhea'}
2025-10-30 00:52:53,437 [INFO] fortress_director.utils.metrics_manager: Metric 'morale' updated from 61 to 62 (cause=autonomous_Rhea)
2025-10-30 00:52:53,437 [INFO] fortress_director.orchestrator.orchestrator: Updating state and persisting...
2025-10-30 00:52:53,437 [INFO] fortress_director.orchestrator.orchestrator: Advanced time to afternoon
2025-10-30 00:52:53,438 [DEBUG] fortress_director.rules.rules_engine: Status effects ticked: []
2025-10-30 00:52:53,438 [INFO] fortress_director.rules.rules_engine: Environmental effects applied with seed 12345
2025-10-30 00:52:53,439 [DEBUG] fortress_director.orchestrator.orchestrator: State after update: {"active_layer": null, "campaign_id": "default_campaign", "character_summary": "Rhea is loyal but impulsive; Boris is cautious and calculating.", "current_room": "courtyard", "current_turn": 7, "day": 2, "flags": ["recent_events", "has_heard_drums", "atmosphere"], "inventory": [], "lore": {}, "memory_layers": [], "memory_long": [], "memory_short": ["Turn 4: You ask the Shieldbearer about the drums you hear in the distance. -> The Shieldbearer, still gazing at the distant horizon where the drums echoed, turns to you as you ap...", "Turn 5: You ask him about the drums you hear in the distance...
2025-10-30 00:52:53,440 [DEBUG] fortress_director.orchestrator.orchestrator: State persisted to C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\data\world_state.json (turn=7)
2025-10-30 00:52:53,440 [INFO] fortress_director.orchestrator.orchestrator: Executing safe function queue...
2025-10-30 00:52:53,440 [INFO] fortress_director.orchestrator.orchestrator: Safe function queue executed.
2025-10-30 00:52:53,440 [DEBUG] fortress_director.orchestrator.orchestrator: State snapshot loaded from C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\data\world_state.json (turn=7)
2025-10-30 00:52:53,441 [DEBUG] fortress_director.orchestrator.orchestrator: State persisted to C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\data\world_state.json (turn=7)
2025-10-30 00:52:53,441 [DEBUG] fortress_director.orchestrator.orchestrator: State snapshot loaded from C:\Users\Fahri\OneDrive\Masaüstü\oyun\fortress_director\data\world_state.json (turn=7)
2025-10-30 00:52:53,441 [DEBUG] fortress_director.utils.metrics_manager: MetricManager initialised with metrics: {'order': 55, 'morale': 62, 'resources': 39, 'knowledge': 46, 'corruption': 10, 'glitch': 23, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 00:52:53,441 [DEBUG] fortress_director.orchestrator.orchestrator: Final metrics snapshot: {'order': 55, 'morale': 62, 'resources': 39, 'knowledge': 46, 'corruption': 10, 'glitch': 23, 'risk_applied_total': 0, 'major_flag_set': False, 'major_events_triggered': 0, 'major_event_last_turn': None}
2025-10-30 00:52:53,442 [INFO] fortress_director.orchestrator.orchestrator: Win/loss status after turn: {'status': 'ongoing', 'reason': 'conditions_not_met', 'description': 'Oyun devam ediyor...'}
2025-10-30 00:52:53,442 [INFO] fortress_director.orchestrator.orchestrator: Turn summary: The day passes quietly.
2025-10-30 00:52:53,442 [INFO] fortress_director.orchestrator.orchestrator: Turn result built.
2025-10-30 00:52:53,443 [DEBUG] fortress_director.orchestrator.orchestrator: Turn result before validation: {"WORLD_CONTEXT": "Turn 6 | Day 2 | Time morning\nLocation: entrance\nPlayer: The Shieldbearer — A weary defender holding the western wall. Inventory: oil lamp, patched shield\nWorld constraint: {\"atmosphere\": \"Dawn h echos through stone, a cool and damp calm envelops.\", \"sensory_details\": \"The air carries the scent of wet earth mingled with oil from lamps fingers trace roughhewn walls while distant drumbeats pulse like heartbeat against skin.\"}\nRecent events: The Shieldbearer, weary from his watch, glances at you with a mix of exhaustion and curiosity. The low clouds hang heavy ov...
2025-10-30 00:52:53,443 [INFO] fortress_director.orchestrator.orchestrator: Turn output validated successfully.
2025-10-30 00:52:53,444 [INFO] fortress_director.orchestrator.orchestrator: Turn completed successfully.
